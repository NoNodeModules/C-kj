{"remainingRequest":"D:\\桌面收纳盒\\codetext\\kjsuper\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面收纳盒\\codetext\\kjsuper\\src\\views\\category\\Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面收纳盒\\codetext\\kjsuper\\src\\views\\category\\Category.vue","mtime":1617451697740},{"path":"D:\\桌面收纳盒\\codetext\\kjsuper\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面收纳盒\\codetext\\kjsuper\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\桌面收纳盒\\codetext\\kjsuper\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面收纳盒\\codetext\\kjsuper\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldENhdGVnb3J5LGdldFN1YmNhdGVnb3J5LGdldENhdGVnb3J5RGV0YWlsLFBPUCwgU0VMTCwgTkVXfSBmcm9tICcuLi8uLi9uZXR3b3JrL2NhdGVnb3J5Jw0KaW1wb3J0IHtkZWJvdW5jZX0gZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzLmpzJw0KDQppbXBvcnQgTmF2QmFyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvY29tbW9uL25hdmJhci9OYXZCYXInDQppbXBvcnQgU2Nyb2xsIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvY29tbW9uL3Njcm9sbC9TY3JvbGwnDQppbXBvcnQgVGFiQ29udHJvbCBmcm9tICcuLi8uLi9jb21wb25lbnRzL2NvbnRlbnQvdGFiQ29udHJvbC9UYWJDb250cm9sJw0KaW1wb3J0IENhdGVnb3J5TGlzdCBmcm9tICcuL2NoaWxkQ29tcHMvQ2F0ZWdvcnlMaXN0Jw0KaW1wb3J0IENhdGVnb3J5SXRlbSBmcm9tICcuL2NoaWxkQ29tcHMvQ2F0ZWdvcnlJdGVtJw0KaW1wb3J0IENhdGVnb3J5SXRlbVRhYiBmcm9tICcuL2NoaWxkQ29tcHMvQ2F0ZWdvcnlJdGVtVGFiJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6J0NhdGVnb3J5JywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY2F0ZWdvcnlBbGw6W10sICAgLy/lhajpg6jmlbDmja4NCiAgICAgIGNhdGVnb3J5TGlzdDpbXSwgIC8vbGlzdOW3pui+ueWIhuexuw0KICAgICAgbWFpdEtleTozNjI3LA0KICAgICAgc3ViY2F0ZWdvcnk6e30sICAgLy/lrZjlhaXliIbnsbvlr7nlupTmlbDmja4gIOS4iumdoumDqOWIhg0KICAgICAgY2F0ZWdvcnlEYXRhOnt9LA0KICAgICAgY3VycmVudEluZGV4Oi0xLA0KICAgICAgY2F0ZWdvcnlpdGVtdGFiOnt9LCAgIC8vdGFi5pWw5o2uDQogICAgICBjYXRlZ29yeXRhYjoncG9wJywgICAgICAgIC8vWyfmtYHooYwnLCfmlrDmrL4nLCfnsr7pgIknXSDngrnlh7vlgLwNCiAgICAgIHRhYjp7fSAgICAgICAgICAgICAgICAgLy/liaXnprvnmoTmlbDmja4NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgLy8g6I635Y+W5Yid5aeL5YyW5pWw5o2uDQogICAgdGhpcy5fZ2V0Q2F0ZWdvcnkoKQ0KICAgIHRoaXMuZ2V0U3ViY2F0ZWdvcnkodGhpcy5tYWl0S2V5KSAgLy/ojrflj5bmraPlnKjmtYHooYzmlbDmja4gDQoNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIF9nZXRDYXRlZ29yeSgpew0KICAgICAgZ2V0Q2F0ZWdvcnkoKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgLy8gMS7ojrflj5bliIbnsbvmlbDmja4NCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpDQogICAgICAgICAgdGhpcy5jYXRlZ29yeUFsbCA9IHJlcw0KICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0ID0gdGhpcy5jYXRlZ29yeUFsbC5kYXRhLmRhdGEuY2F0ZWdvcnkubGlzdA0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY2F0ZWdvcnlMaXN0KQ0KICAgICAgICANCg0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2F0ZWdvcnlMaXN0Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB0aGlzLmNhdGVnb3J5RGF0YVtpXSA9IHsNCiAgICAgICAgICAgICAgc3ViY2F0ZWdvcmllczoge30sDQogICAgICAgICAgICAgIGNhdGVnb3J5RGV0YWlsOiB7DQogICAgICAgICAgICAgICAgJ3BvcCc6IFtdLA0KICAgICAgICAgICAgICAgICduZXcnOiBbXSwNCiAgICAgICAgICAgICAgICAnc2VsbCc6IFtdDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY2F0ZWdvcnlEYXRhKQ0KICAgICAgICAgIH0NCiAgICAgICAgICAvLyAzLuivt+axguesrOS4gOS4quWIhuexu+eahOaVsOaNrg0KICAgICAgICAgIHRoaXMuX2dldFN1YmNhdGVnb3JpZXMoMCkNCg0KICAgICAgICAgIC8vIHRhYiDliJ3lp4vmlbDmja4g5q2j5Zyo5rWB6KGMICBpbmRleD0wDQogICAgICAgICAgdGhpcy5jYXRlZ29yeWl0ZW10YWIgPSB0aGlzLmNhdGVnb3J5RGF0YVswXS5jYXRlZ29yeURldGFpbA0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY2F0ZWdvcnlpdGVtdGFiKQ0KDQogICAgICB9KQ0KDQoNCg0KICAgIH0sDQogICAgX2dldFN1YmNhdGVnb3JpZXMoaW5kZXgpIHsNCiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBpbmRleDsNCgkJICAgIGNvbnN0IG1haWxLZXkgPSB0aGlzLmNhdGVnb3J5TGlzdFtpbmRleF0ubWFpdEtleTsNCiAgICAgICAgZ2V0U3ViY2F0ZWdvcnkobWFpbEtleSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMuY2F0ZWdvcnlEYXRhW2luZGV4XS5zdWJjYXRlZ29yaWVzID0gcmVzLmRhdGENCiAgICAgICAgICB0aGlzLmNhdGVnb3J5RGF0YSA9IHsuLi50aGlzLmNhdGVnb3J5RGF0YX0NCiAgICAgICAgICB0aGlzLl9nZXRDYXRlZ29yeURldGFpbChQT1ApDQogICAgICAgICAgdGhpcy5fZ2V0Q2F0ZWdvcnlEZXRhaWwoU0VMTCkNCiAgICAgICAgICB0aGlzLl9nZXRDYXRlZ29yeURldGFpbChORVcpDQogICAgICAgIH0pDQogICAgICB9LA0KICAgICAgX2dldENhdGVnb3J5RGV0YWlsKHR5cGUpIHsNCgkJICAgIC8vIDEu6I635Y+W6K+35rGC55qEbWluaVdhbGxrZXkNCiAgICAgICAgY29uc3QgbWluaVdhbGxrZXkgPSB0aGlzLmNhdGVnb3J5TGlzdFt0aGlzLmN1cnJlbnRJbmRleF0ubWluaVdhbGxrZXk7DQogICAgICAgIC8vIDIu5Y+R6YCB6K+35rGCLOS8oOWFpW1pbmlXYWxsa2V55ZKMdHlwZQ0KCQkgICAgZ2V0Q2F0ZWdvcnlEZXRhaWwobWluaVdhbGxrZXksIHR5cGUpLnRoZW4ocmVzID0+IHsNCgkJICAgICAgLy8gMy7lsIbojrflj5bnmoTmlbDmja7kv53lrZjkuIvmnaUNCgkJICAgICAgdGhpcy5jYXRlZ29yeURhdGFbdGhpcy5jdXJyZW50SW5kZXhdLmNhdGVnb3J5RGV0YWlsW3R5cGVdID0gcmVzDQogICAgICAgICAgdGhpcy5jYXRlZ29yeURhdGEgPSB7Li4udGhpcy5jYXRlZ29yeURhdGF9DQogICAgICAgIH0pDQogICAgICB9LA0KDQoNCg0KDQogICAgLy8g5L2/55SobWFpdEtleSDojrflvpflr7nlupTnsbvmlbDmja4NCiAgICBnZXRTdWJjYXRlZ29yeShtYWl0S2V5KXsNCiAgICAgIGdldFN1YmNhdGVnb3J5KG1haXRLZXkpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKQ0KICAgICAgICB0aGlzLnN1YmNhdGVnb3J5ID0gcmVzLmRhdGEuZGF0YQ0KICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnN1YmNhdGVnb3J5KTsNCg0KICAgICAgICB0aGlzLiRyZWZzLlRhYlNjcm9sbC5yZWZyZXNoKCkNCg0KICAgICAgfSkNCiAgICB9LA0KICAgIHJlZnJlc2goKXsNCiAgICAgIHRoaXMuJHJlZnMuVGFiU2Nyb2xsLnJlZnJlc2goKQ0KICAgICAgLy8gY29uc29sZS5sb2coJ3JlZnJlc2gnKQ0KICAgIH0sDQogICAgLy8g54K55Ye75bem6L655YiG57G7IOiOt+W+l21haXRLZXkNCiAgICBsaUNsaWNrKGluZGV4KXsNCiAgICAgIHRoaXMubWFpdEtleT10aGlzLmNhdGVnb3J5TGlzdFtpbmRleF0ubWFpdEtleQ0KICAgICAgLy8gY29uc29sZS5sb2coJ+ivpeWIhuexu+err+WPo21haXRLZXnlgLwnK3RoaXMubWFpdEtleSkNCiAgICAgIHRoaXMuZ2V0U3ViY2F0ZWdvcnkodGhpcy5tYWl0S2V5KQ0KDQoNCiAgICAgIHRoaXMuX2dldFN1YmNhdGVnb3JpZXMoaW5kZXgpDQoNCiAgICAgIGNvbnNvbGUubG9nKGluZGV4KQ0KDQogICAgICAvLyDliqDovb10YWLmlbDmja4gICDlsIbmlbDmja7lrZjlhaVjYXRlZ29yeWl0ZW10YWINCiAgICAgIHRoaXMuY2F0ZWdvcnlpdGVtdGFiID0gdGhpcy5jYXRlZ29yeURhdGFbaW5kZXhdLmNhdGVnb3J5RGV0YWlsDQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNhdGVnb3J5RGF0YVtpbmRleF0uY2F0ZWdvcnlEZXRhaWwpDQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNhdGVnb3J5aXRlbXRhYikNCiAgICB9LA0KICAgIGltZ2xvYWQoKXsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCfliqDovb0nKQ0KICAgICAgdGhpcy5yZWZyZXNoKCkNCiAgICAgIA0KICAgIH0sDQoNCg0KICAgIHRhYkNsaWNrKGluZGV4KXsNCiAgICAgIHN3aXRjaChpbmRleCl7DQogICAgICAgIGNhc2UgMDoNCiAgICAgICAgICB0aGlzLmNhdGVnb3J5dGFiID0gJ3BvcCcNCiAgICAgICAgICBicmVhaw0KICAgICAgICBjYXNlIDE6DQogICAgICAgICAgdGhpcy5jYXRlZ29yeXRhYiA9ICduZXcnDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgY2FzZSAyOg0KICAgICAgICAgIHRoaXMuY2F0ZWdvcnl0YWIgPSAnc2VsbCcNCiAgICAgICAgICBicmVhaw0KICAgICAgfQ0KICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jYXRlZ29yeXRhYikNCiAgICAgIHRoaXMudGFiID0gdGhpcy5jYXRlZ29yeWl0ZW10YWJbdGhpcy5jYXRlZ29yeXRhYl0NCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudGFiKTsNCiAgICAgIC8vIOi/m+ihjOaVsOaNruWJpeemuyAgDQogICAgICANCiAgICB9LA0KICB9LA0KICBjb21wb25lbnRzOnsNCiAgICBDYXRlZ29yeUxpc3QsDQogICAgU2Nyb2xsLA0KICAgIE5hdkJhciwNCiAgICBUYWJDb250cm9sLA0KICAgIENhdGVnb3J5SXRlbSwNCiAgICBDYXRlZ29yeUl0ZW1UYWINCiAgfSwNCn0NCg=="},{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Category.vue","sourceRoot":"src/views/category","sourcesContent":["<template>\r\n  <div class=\"category\">\r\n    <!-- 商品分类标题 -->\r\n    <nav-bar class=\"navbar\">\r\n      <div slot=\"center\">商品分类</div>\r\n    </nav-bar>\r\n\r\n    <div class=\"categoryitem\">\r\n      <category-list :categoryList=\"categoryList\" @liClick=\"liClick\"></category-list>\r\n      <div style=\"width: 100%;\">\r\n        <tab-control :titles=\"['流行','新款','精选']\" class=\"tab-control\" @tabClick='tabClick'></tab-control>\r\n        <scroll class=\"scrollwk\" ref=\"TabScroll\">\r\n          <category-item :subcategory=\"subcategory\" @imgload=\"imgload\"></category-item>\r\n          <category-item-tab :categoryitemtab='categoryitemtab' :categorytab=\"categorytab\"></category-item-tab>\r\n        </scroll>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getCategory,getSubcategory,getCategoryDetail,POP, SELL, NEW} from '../../network/category'\r\nimport {debounce} from '../../common/utils.js'\r\n\r\nimport NavBar from '../../components/common/navbar/NavBar'\r\nimport Scroll from '../../components/common/scroll/Scroll'\r\nimport TabControl from '../../components/content/tabControl/TabControl'\r\nimport CategoryList from './childComps/CategoryList'\r\nimport CategoryItem from './childComps/CategoryItem'\r\nimport CategoryItemTab from './childComps/CategoryItemTab'\r\n\r\nexport default {\r\n  name:'Category',\r\n  data() {\r\n    return {\r\n      categoryAll:[],   //全部数据\r\n      categoryList:[],  //list左边分类\r\n      maitKey:3627,\r\n      subcategory:{},   //存入分类对应数据  上面部分\r\n      categoryData:{},\r\n      currentIndex:-1,\r\n      categoryitemtab:{},   //tab数据\r\n      categorytab:'pop',        //['流行','新款','精选'] 点击值\r\n      tab:{}                 //剥离的数据\r\n    }\r\n  },\r\n  created() {\r\n    // 获取初始化数据\r\n    this._getCategory()\r\n    this.getSubcategory(this.maitKey)  //获取正在流行数据 \r\n\r\n  },\r\n  methods: {\r\n    _getCategory(){\r\n      getCategory().then(res => {\r\n          // 1.获取分类数据\r\n          // console.log(res)\r\n          this.categoryAll = res\r\n          this.categoryList = this.categoryAll.data.data.category.list\r\n          // console.log(this.categoryList)\r\n        \r\n\r\n        for (let i = 0; i < this.categoryList.length; i++) {\r\n            this.categoryData[i] = {\r\n              subcategories: {},\r\n              categoryDetail: {\r\n                'pop': [],\r\n                'new': [],\r\n                'sell': []\r\n              }\r\n            }\r\n            // console.log(this.categoryData)\r\n          }\r\n          // 3.请求第一个分类的数据\r\n          this._getSubcategories(0)\r\n\r\n          // tab 初始数据 正在流行  index=0\r\n          this.categoryitemtab = this.categoryData[0].categoryDetail\r\n          // console.log(this.categoryitemtab)\r\n\r\n      })\r\n\r\n\r\n\r\n    },\r\n    _getSubcategories(index) {\r\n        this.currentIndex = index;\r\n\t\t    const mailKey = this.categoryList[index].maitKey;\r\n        getSubcategory(mailKey).then(res => {\r\n          this.categoryData[index].subcategories = res.data\r\n          this.categoryData = {...this.categoryData}\r\n          this._getCategoryDetail(POP)\r\n          this._getCategoryDetail(SELL)\r\n          this._getCategoryDetail(NEW)\r\n        })\r\n      },\r\n      _getCategoryDetail(type) {\r\n\t\t    // 1.获取请求的miniWallkey\r\n        const miniWallkey = this.categoryList[this.currentIndex].miniWallkey;\r\n        // 2.发送请求,传入miniWallkey和type\r\n\t\t    getCategoryDetail(miniWallkey, type).then(res => {\r\n\t\t      // 3.将获取的数据保存下来\r\n\t\t      this.categoryData[this.currentIndex].categoryDetail[type] = res\r\n          this.categoryData = {...this.categoryData}\r\n        })\r\n      },\r\n\r\n\r\n\r\n\r\n    // 使用maitKey 获得对应类数据\r\n    getSubcategory(maitKey){\r\n      getSubcategory(maitKey).then(res => {\r\n        // console.log(res)\r\n        this.subcategory = res.data.data\r\n        // console.log(this.subcategory);\r\n\r\n        this.$refs.TabScroll.refresh()\r\n\r\n      })\r\n    },\r\n    refresh(){\r\n      this.$refs.TabScroll.refresh()\r\n      // console.log('refresh')\r\n    },\r\n    // 点击左边分类 获得maitKey\r\n    liClick(index){\r\n      this.maitKey=this.categoryList[index].maitKey\r\n      // console.log('该分类端口maitKey值'+this.maitKey)\r\n      this.getSubcategory(this.maitKey)\r\n\r\n\r\n      this._getSubcategories(index)\r\n\r\n      console.log(index)\r\n\r\n      // 加载tab数据   将数据存入categoryitemtab\r\n      this.categoryitemtab = this.categoryData[index].categoryDetail\r\n      // console.log(this.categoryData[index].categoryDetail)\r\n      // console.log(this.categoryitemtab)\r\n    },\r\n    imgload(){\r\n      // console.log('加载')\r\n      this.refresh()\r\n      \r\n    },\r\n\r\n\r\n    tabClick(index){\r\n      switch(index){\r\n        case 0:\r\n          this.categorytab = 'pop'\r\n          break\r\n        case 1:\r\n          this.categorytab = 'new'\r\n          break\r\n        case 2:\r\n          this.categorytab = 'sell'\r\n          break\r\n      }\r\n      // console.log(this.categorytab)\r\n      this.tab = this.categoryitemtab[this.categorytab]\r\n      // console.log(this.tab);\r\n      // 进行数据剥离  \r\n      \r\n    },\r\n  },\r\n  components:{\r\n    CategoryList,\r\n    Scroll,\r\n    NavBar,\r\n    TabControl,\r\n    CategoryItem,\r\n    CategoryItemTab\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.navbar{\r\n  position: fixed;\r\n  background-color:rgb(255, 129, 152) ;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  color: #fff;\r\n  z-index: 999;\r\n}\r\n.categoryitem{\r\n  margin-top: 44px;\r\n  display: flex;\r\n}\r\n.tab-control{\r\n  width: 100%;\r\n}\r\n.scrollwk{\r\n  height: calc(100vh - 45px - 40px - 50px);\r\n  overflow: hidden;\r\n}\r\n</style>"]}]}